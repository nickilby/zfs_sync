# ZFS Sync Configuration Example
# Copy this file to zfs_sync.yaml and modify as needed

# Application settings
app_name: "zfs-sync"
app_version: "0.1.64"
debug: false
log_level: "INFO"

# Server configuration
host: "0.0.0.0"
port: 8000
api_prefix: "/api/v1"

# Database configuration
# Default location is platform-specific:
#   - Linux: /var/lib/zfs-sync/zfs_sync.db
#   - Windows: %APPDATA%/zfs-sync/zfs_sync.db
#   - macOS/Other: ~/.local/share/zfs-sync/zfs_sync.db
#
# For SQLite with custom path (override default):
# database_url: "sqlite:////var/lib/zfs-sync/zfs_sync.db"
# database_url: "sqlite:////path/to/custom/location/zfs_sync.db"
#
# For PostgreSQL (production):
# database_url: "postgresql://user:password@localhost:5432/zfs_sync"
#
# Note: The database path can also be set via the ZFS_SYNC_DATABASE_URL environment variable

# Security
secret_key: null  # Set via environment variable ZFS_SYNC_SECRET_KEY
api_key_length: 32

# Sync settings
default_sync_interval_seconds: 3600  # 1 hour
heartbeat_timeout_seconds: 300  # 5 minutes

# Sync automation
sync_check_interval_seconds: 300  # Check every 5 minutes
auto_sync_enabled: true
incremental_sync_only: true  # Only auto-sync incremental snapshots

# Logging settings
suppress_orphan_dataset_logs: true  # Suppress repeated orphan dataset warnings (useful for hub systems)

# Log file rotation settings
# log_file: "/logs/zfs_sync.log"  # Path to log file (defaults to /logs/zfs_sync.log in Docker)
# log_max_bytes: 10485760  # Maximum log file size before rotation (10MB in bytes)
# log_backup_count: 5  # Number of rotated log files to keep

# Example sync group configurations:
#
# Bidirectional sync group (default behavior):
# {
#   "name": "production-cluster",
#   "description": "Production ZFS cluster with bidirectional sync",
#   "enabled": true,
#   "directional": false,
#   "system_ids": ["system1-uuid", "system2-uuid", "system3-uuid"]
# }
#
# Hub-and-spoke directional sync group:
# {
#   "name": "source-of-truth-distribution",
#   "description": "Hub-and-spoke distribution from master to replicas",
#   "enabled": true,
#   "directional": true,
#   "hub_system_id": "master-server-uuid",
#   "system_ids": ["master-server-uuid", "replica1-uuid", "replica2-uuid"]
# }
#
# Note: In directional mode:
# - The hub system pushes snapshots TO all other systems
# - Other systems only receive from the hub (no cross-sync)
# - Hub acts as source of truth for data distribution
# - Use for master-replica scenarios, content distribution
